<script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/admin.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/BACKUP_RESTORE.CSS') }}">

  <div class="row no-gutters dashboard">
    <!-- Sidebar -->
    <div class="sidebar fixed-sidebar" style="height: 100vh; overflow-y: hidden; width: 300px;">
        <div class="logo">
            <img src="{{ url_for('static', filename='pictures/JBR LOGO.png') }}" alt="JBR Logo">
            <div class="logo-text">JBR TANCHING C.O</div>
        </div>
        <div class="nav-items">
            <a href="#" class="nav-item active" id="dashboard-tab-btn">Dashboard</a>
            <a href="#" class="nav-item" id="supplier-tab-btn">Supplier</a>
            <a href="#" class="nav-item" id="inventory-tab-btn">Inventory</a>
            <a href="#" class="nav-item" id="product-tab-btn">Products</a>
            <a href="#" class="nav-item" id="sales-tab-btn">Sales</a>
            <a href="#" class="nav-item" id="customer-orders-tab-btn">Customer Order</a>
            <a href="#" class="nav-item" id="reports-tab-btn">Reports</a>
            <a href="#" class="nav-item" id="personnel-tab-btn">Personnel</a>
            <a href="#" class="nav-item" id="setting-tab-btn">Settings</a>
            <a href="#" class="nav-item" id="backup-tab-btn">Backup & Restore</a>
        </div>
    </div>
      
      <!-- User Profile Section -->
      <div class="main-content">
      <!-- Flash messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="alert alert-{{ 'success' if category == 'success' else 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert" style="margin-top: 20px;">
              {{ message }}
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

        <div class="user-profile compact-profile" style="position: absolute; top: 10px; right: 10px;">
          <div class="chat-floating-wrapper compact-chat">
            <button id="chat-modal-btn" class="chat-icon-btn compact-chat-btn">
              <i class="fa fa-envelope"></i>
            </button>
          </div>
          <div class="profile-icon compact-profile-icon">
            <i class="fa fa-user"></i>
          </div>
          <div class="profile-details">
  <span class="profile-name">{{ user.username }}</span>
  <span class="profile-role">{{ user.role|upper }}</span>
</div>
<div class="dropdown-wrapper" style="position: relative;">
  <button class="dropdown-btn" id="profile-dropdown-btn">
    <span class="fa fa-chevron-down"></span>
  </button>
  <div class="dropdown-menu" id="adminDropdownMenu" style="right: 0; min-width: 160px; position: absolute; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); z-index: 1000; display: none;">
    <a href="#" class="dropdown-item" id="adminLogoutBtn" style="display: block; padding: 10px 20px; color: #333; text-decoration: none;">Log Out</a>
  </div>
            </button>
            <div class="dropdown-menu" id="profile-dropdown-menu">
              <a href="{{ url_for('auth.logout') }}" class="logout-link">
                <span class="fa fa-sign-out" style="margin-right: 8px;"></span>
                LOGOUT
              </a>
            </div>
            <script>
            document.getElementById('profile-dropdown-btn').onclick = function(e) {
              e.stopPropagation();
              document.getElementById('profile-dropdown-menu').classList.toggle('active');
            };
            document.addEventListener('click', function() {
              document.getElementById('profile-dropdown-menu').classList.remove('active');
            });
            document.getElementById('profile-dropdown-menu').onclick = function(e) {
              e.stopPropagation();
            };
            </script>
            <style>
            .dropdown-menu { display: none; position: absolute; background: #fff; }
            .dropdown-menu.active { display: block; }
            </style>
        </div>
      </div>

      <!-- Product Modal -->
<div class="modal fade" id="productModal" tabindex="-1" role="dialog" aria-labelledby="productModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="modal-product-form" enctype="multipart/form-data">
        <div class="modal-header">
          <h5 class="modal-title" id="productModalLabel">Add Product</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Picture</label>
            <input type="file" name="picture" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Product Name</label>
            <input type="text" name="product_name" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Model Number</label>
            <input type="text" name="model_number" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea name="description" class="form-control"></textarea>
          </div>
          <div class="form-group">
            <label>Category ID</label>
            <input type="number" name="category_id" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Base Price</label>
            <input type="number" name="base_price" class="form-control" step="0.01" required>
          </div>
          <div class="form-group">
            <label>Discount Percentage</label>
            <input type="number" name="discount_percentage" class="form-control" step="0.01">
          </div>
          <div class="form-group">
            <label>Stock Quantity</label>
            <input type="number" name="stock_quantity" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Brand ID</label>
            <input type="number" name="brand_id" class="form-control" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Product Image Modal -->
<div class="modal fade" id="productImageModal" tabindex="-1" role="dialog" aria-labelledby="productImageModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="modal-product-image-form" enctype="multipart/form-data">
        <div class="modal-header">
          <h5 class="modal-title" id="productImageModalLabel">Add Product Image</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Product ID</label>
            <input type="number" name="product_id" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Image</label>
            <input type="file" name="image" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Image Type</label>
            <input type="text" name="image_type" class="form-control">
          </div>
          <div class="form-group">
            <label>Display Order</label>
            <input type="number" name="display_order" class="form-control">
          </div>
          <div class="form-group">
            <label>Text</label>
            <input type="text" name="text" class="form-control">
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Product Specification Modal -->
<div class="modal fade" id="productSpecModal" tabindex="-1" role="dialog" aria-labelledby="productSpecModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="modal-product-spec-form">
        <div class="modal-header">
          <h5 class="modal-title" id="productSpecModalLabel">Add Product Specification</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Product ID</label>
            <input type="number" name="product_id" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Specification Name</label>
            <input type="text" name="spec_name" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Specification Value</label>
            <input type="text" name="spec_value" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Display Order</label>
            <input type="number" name="display_order" class="form-control">
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Product Variant Modal -->
<div class="modal fade" id="productVariantModal" tabindex="-1" role="dialog" aria-labelledby="productVariantModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="modal-product-variant-form">
        <div class="modal-header">
          <h5 class="modal-title" id="productVariantModalLabel">Add Product Variant</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Product ID</label>
            <input type="number" name="product_id" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Variant Name</label>
            <input type="text" name="variant_name" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Variant Value</label>
            <input type="text" name="variant_value" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Additional Price</label>
            <input type="number" name="additional_price" class="form-control" step="0.01">
          </div>
          <div class="form-group">
            <label>Stock Quantity</label>
            <input type="number" name="stock_quantity" class="form-control">
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Category Modal -->
<div class="modal fade" id="categoryModal" tabindex="-1" role="dialog" aria-labelledby="categoryModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="modal-category-form">
        <div class="modal-header">
          <h5 class="modal-title" id="categoryModalLabel">Add Category</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Category Name</label>
            <input type="text" name="category_name" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Parent Category ID</label>
            <input type="number" name="parent_category_id" class="form-control">
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div id="notifySupplierModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close-modal" id="closeNotifyModal">&times;</span>
    <h2>Notify Supplier</h2>
    <form id="notifySupplierForm">
      <input type="hidden" id="modalProductId">
      <div>
        <label>Product Name:</label>
        <span id="modalProductName"></span>
      </div>
      <div>
        <label>Supplier:</label>
        <span id="modalSupplierName"></span>
      </div>
      <div>
        <label>Supplier Price:</label>
        <span id="modalSupplierPrice"></span>
      </div>
      <div>
        <label>Quantity Requested:</label>
        <input type="number" id="modalQuantityRequested" min="1" required>
      </div>
      <div>
        <label>Notes:</label>
        <textarea id="modalNotes"></textarea>
      </div>
      <button type="submit">Send Request</button>
    </form>
  </div>
</div>

    <!-- Main Content (ADMIN MAIN CONTENT) -->
    <div class="main-content">
        <!-- Dashboard Section (ADMIN DASHBOARD SECTION) -->
        <div id="dashboard-section" class="content-section active">
            <div class="header">
                <h1>DASHBOARD</h1>
            </div>
            
            <div class="dashboard-cards">

              <div class="bible-verse">
                <p class="verse-text">"I can do all things through Christ who strengthens me." <br> <span class="verse-ref">â€“ Philippians 4:13</span></p>
              </div>

                 <!-- For Delivery Card -->
                <div class="card-for-delivery">
                  <h2>ðŸšš For Delivery</h2>
                  <div class="total-orders">
                    <span class="total-orders-number">20</span>
                    <span class="order-label">Total Orders to Deliver</span>
                  </div>
                </div>

                <div class="card-for-new-orders">
                  <h2>ðŸ†• New Orders</h2>
                  <div class="total-orders">
                    <span class="total-orders-number">0</span>
                    <span class="order-label">Total of New Orders</span>
                  </div>
                </div>
              <!-- Critical Stock Card -->
                <div class="card">
                    <h2>
                        Critical Stock
                        <div class="total-stocks">
                            <span class="total-stocks-number">0</span>
                            Total of Critical Stocks
                        </div>
                    </h2>
                    <table class="table table-sm critical-stock-table">
                        <thead>
                            <tr>
                                <th>PRODUCT ID</th>
                                <th>PRODUCT NAME</th>
                                <th>SUPPLIER</th>
                                <th>AVAILABLE STOCK</th>
                                <th>ALERT LEVEL</th>
                                <th>BELOW MINIMUM</th>
                                <th>NOTIFY SUPPLIER</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                        </tbody>
                    </table>
                </div>
            </div>
        </div>


        <!-- Supplier Section -->
        <div id="supplier-section" class="content-section">
            <div class="header">
                <h1>SUPPLIER MANAGEMENT</h1>
            </div>

            <div class="supplier-cards">
                <!-- Supplier Filter Card -->
                <div class="card">
                    <div class="filter-section">
                        <div class="filter-group">
                            <label>Filter by Supplier:</label>
                            <select class="filter-select" id="supplier-filter-supplier">
                              <option value="">Select an option</option>
                              <option value="">All</option>
                              <option value="Shunfa">Shunfa</option>
                              <option value="Skylab Manufacturing">Skylab Manufacturing</option>
                              <option value="Quitalig Manufacturing">Quitalig Manufacturing</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Filter by Status:</label>
                            <select class="filter-select" id="supplier-filter-status">
                                <option value="">Select an option</option>
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>
                        <div class="filter-buttons">
                            <button class="filter-btn">Filter</button>
                            <button class="add-btn" id="supplier-add-btn">Add</button>
                        </div>
                    </div>
                </div>

                <!-- Supplier List Card -->
                <div class="card">
                  <table class="supply-request-table">
                    <h3>SUPPLY REQUEST</h3>
                    <thead>
                        <tr>
                            <th>Request ID</th>
                            <th>Product ID</th>
                            <th>Product Name</th>
                            <th>Supplier Price</th>
                            <th>Requested By</th>
                            <th>Quantity Requested</th>
                            <th>Status</th>
                            <th>Notes</th>
                            <th>Request Date</th>
                            <th>Updated At</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Supplier rows will be dynamically rendered by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div class="card">
                  <table class="table table-sm supplier-table">
                     <h3>SUPPLIERS INFO</h3>
                       <thead>
                           <tr>
                               <th>Supplier ID</th>
                               <th>Supplier Name</th>
                               <th>Contact Person</th>
                               <th>Phone Number</th>
                               <th>Email</th>
                               <th>Address</th>
                               <th>Supplier Status</th>
                               <th>Registration Date</th>
                               <th>Actions</th>
                         </tr>
                     </thead>
                     <tbody>
                         <!-- JS will populate rows here -->
                     </tbody>
                 </table>
               </div>
                <div class="card">
                  <table class="supplier-products-table-body">
                    <h3>SUPPLIERS PRODUCTS MANAGEMENT
    <button class="btn btn-primary btn-sm" style="margin-left: 12px;" onclick="addSupplierProduct()">Add Supplier Product</button>
</h3>
                      <thead>
                          <tr>
                              <th>Product Supplier ID</th>
                              <th>Product ID</th>
                              <th>Product Name</th>
                              <th>Supplier ID</th>
                              <th>Supplier Price</th>
                              <th>Is Primary</th> 
                              <th>Actions</th>
                          </tr>
                      </thead>
                      <tbody id="supplier-products-table-body">
                          <!-- Supplier rows will be dynamically rendered by JavaScript -->
                      </tbody>
                  </table>
              </div>
            </div>
        </div>

        <!-- Inventory Section -->
        <div id="inventory-section" class="content-section">
            <div class="header">
                <h1>INVENTORY MANAGEMENT</h1>
            </div>
            <div class="inventory-cards">
                <!-- Inventory Filter Card -->
                <div class="card">
                    <div class="filter-section">
                        <div class="filter-group">
                            <label>Filter by Category:</label>
                            <select class="filter-select" id="filter-category">
                                <option value="">Select an option</option>
                                <option value="Sewing Machines">Sewing Machines</option>
                                <option value="Sewing Machine Parts">Sewing Machine Parts</option>
                                <option value="Fabric">Fabric</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Filter by Item:</label>
                            <select class="filter-select" id="filter-item">
                                <option value="">Select an option</option>
                                <option value="sf-1020">SF-1020 - Speed master high-speed machine</option>
                                <option value="sf-562">SF-562 - Button hole machine</option>
                                <option value="sf-781">SF-781 - Button holder machine</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Filter by Stock Quantity:</label>
                            <select class="filter-select" id="filter-stock">
                                <option value="">Select an option</option>
                                <option value="out">Out of Stock (0)</option>
                                <option value="low">Low Stock (1-10)</option>
                                <option value="medium">Medium Stock (11-50)</option>
                                <option value="high">High Stock (50+)</option>
                            </select>
                        </div>
                        <div class="filter-buttons">
                            <button class="filter-btn">Filter</button>
                            <button class="add-btn" id="inventory-add-btn">Add</button>
                        </div>
                    </div>
                </div>

                <!-- Inventory List Card -->
                <div class="card">
                    <table class="table inventory-table">
                        <thead>
                            <tr>
                                <th>Inventory ID</th>
                                <th>Product ID</th>
                                <th>Order ID</th>
                                <th>Product Name</th>
                                <th>Supplier Name</th>
                                <th>Supplier Price</th>
                                <th>Stock Quantity</th>
                                <th>Stock In</th>
                                <th>Stock Out</th>
                                <th>Min Stock</th>
                                <th>Max Stock</th>
                                <th>Available Stock</th>
                                <th>Stock Status</th>
                                <th>Created At</th>
                                <th>Last Updated</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        <!-- Inventory rows will be dynamically inserted here by admin.js -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Product Section -->
        <div id="product-section" class="content-section">
            <div class="header">
                <h1>PRODUCT MANAGEMENT</h1>
            </div>

            <div class="product-cards">
                <!-- Product Filter Card -->
                <div class="card">
                    <div class="filter-section">
                        <div class="filter-group">
                            <label>Filter by Order ID:</label>
                            <select class="filter-select" id="product-filter-order-id">
                              <option value="">Select an option</option>
                              <option value="ORD-001">ORD-001</option>
                              <option value="ORD-002">ORD-002</option>
                              <option value="ORD-003">ORD-003</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Filter by Product Name:</label>
                            <select class="filter-select" id="product-filter-product-name">
                                <option value="">Select an option</option>
                                <option value="sf-1020">Single Sample Product</option>
                                <option value="sf-562">Anysew Sample Product</option>
                                <option value="sf-781">Shunfa Single Needle High Speed Machine</option>
                                <option value="sf-782">Shunfa Piping Machine</option>
                            </select>
                        </div>
                        <div class="filter-group">
                          <label>Filter by Category:</label>
                          <select class="filter-select" id="product-filter-category">
                              <option value="">Select an option</option>
                              <option value="Machine">Machine</option>
                              <option value="Accessories">Accessories</option>
                          </select>
                      </div>
                        <div class="filter-buttons">
                            <button class="filter-btn">Filter</button>
                    </div>
                </div>

                <!-- Product List Card -->
                <div class="card">
                  <button class="btn btn-outline-dark" id="openProductModal">Add Product</button>
                  <table class="table table-sm product-table">
                    <h2>PRODUCTS</h2>
                        <thead>
                            <tr>
                                <th>Picture</th>
                                <th>Product ID</th>
                                <th>Product Name</th>
                                <th>Model Number</th>
                                <th>Description</th>
                                <th>Category ID</th>
                                <th>Base Price</th>
                                <th>Updated At</th>
                                <th>Created At</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        <!-- Product rows will be dynamically rendered by JavaScript -->
                        
                        </tbody>
                    </table>
                </div>

                <div class="card">
                  <button class="btn btn-outline-dark mb-2" id="openProductImageModal">Add Product Image</button>
                  <table class="table table-sm product-table">
                    <h2>PRODUCTS IMAGE</h2>
                      <thead>
                          <tr>
                              <th>Image ID</th>
                              <th>Product ID</th>
                              <th>Image</th>
                              <th>Image Type</th>
                              <th>Display Order</th>
                              <th>Text</th>
                              
                          </tr>
                      </thead>
                      <tbody>
                      <!-- Product rows will be dynamically rendered by JavaScript -->
                       
                      </tbody>
                  </table>
              </div>

              <div class="card">
                <button class="btn btn-outline-dark mb-2" id="openProductSpecModal">Add Product Specification</button>
                <table class="table table-sm product-spec-table">
                  <h2>PRODUCT SPECIFICATION</h2>
                    <thead>
                        <tr>
                            <th>Specification ID</th>
                            <th>Product ID</th>
                            <th>Specification Name</th>
                            <th>Specification Value</th>
                            <th>Display Order</th>
                            
                        </tr>
                    </thead>
                    <tbody>
                    <!-- Product rows will be dynamically rendered by JavaScript -->
                    </tbody>
                </table>
            </div>

            <div class="card">
              <button class="btn btn-outline-dark mb-2" id="openProductVariantModal">Add Product Variant</button>
              <table class="table table-sm product-variants-table">
                <h2>PRODUCTS VARIANTS</h2>
                  <thead>
                      <tr>
                          <th>Variant ID</th>
                          <th>Product ID</th>
                          <th>Variant Name</th>
                          <th>Variant Value</th>
                          <th>Additional Price</th>
                          <th>Stock Quantity</th>
                          <th>Created At</th>
                          <th>Updated At</th>
                          
                      </tr>
                  </thead>
                  <tbody>
                  <!-- Product rows will be dynamically rendered by JavaScript -->
                  
                  </tbody>
              </table>
          </div>

        <div class="card">
          <button class="btn btn-outline-dark mb-2" id="openCategoryModal">Add Category</button>
          <table class="table table-sm category-table">
            <h2>CATEGORIES</h2>
              <thead>
                  <tr>
                      <th>Category ID</th>
                      <th>Category Name</th>
                      <th>Parent Category ID</th>
                      
                  </tr>
              </thead>
              <tbody>
              <!-- Product rows will be dynamically rendered by JavaScript -->
               
              </tbody>
          </table>
      </div>


            </div>
        </div>
      </div>



        
         <!-- Sales Section -->
        <div id="sales-section" class="content-section">
            <div class="header">
              <h1>SALES MANAGEMENT</h1>
            </div>
            <div class="sales-cards">
              <div class="card">
                <div class="filter-section">
                  <div class="filter-group">
                    <label>Filter by Date:</label>
                    <input type="date" class="date-input" value="2025-04-09">
                  </div>
                  <div class="filter-group">
                    <label>Filter by Status:</label>
                    <select class="filter-select" id="filter-category">
                      <option value="">All Status</option>
                      <option value="paid">Paid</option>
                      <option value="pending">Pending</option>
                      <option value="to-ship">To Ship</option>
                      <option value="to-receive">To Receive</option>
                    </select>
                  </div>
                  <div class="filter-group">
                    <label>Filter by Customer:</label>
                    <select class="filter-select" id="filter-category">
                      <option value="">All Customers</option>
                    </select>
                  </div>
                  <div class="filter-buttons">
                    <button class="filter-btn">Apply Filters</button>
                  </div>
                </div>
              </div>
              <div class="card">
                <table class="table sales-table">
                  <thead>
                    <tr>
                      <th>Sale ID</th>
                      <th>Order ID</th>
                      <th>Product ID</th>
                      <th>User ID</th>
                      <th>Sale Date</th>
                      <th>Total Amount</th>
                      <th>Payment ID</th>
                      <th>Actions</th>
                      
                    </tr>
                  </thead>
                  <tbody>

                  </tbody>
                </table>
              </div>
            </div>
          </div>
  
          <!-- Customer Orders Section -->
          <div id="customer-orders-section" class="content-section">
            <div class="header">
              <h1>CUSTOMER ORDERS</h1>
            </div>
            <div class="customer-orders-cards">
              <div class="card">
                <div class="filter-section">
                  <div class="filter-group">
                    <label>Filter by Status:</label>
                    <select class="filter-select" id="filter-category">
                      <option value="">All Status</option>
                      <option value="paid">Paid</option>
                      <option value="pending">Pending</option>
                      <option value="to-ship">To Ship</option>
                      <option value="to-receive">To Receive</option>
                    </select>
                  </div>
                  <div class="filter-group">
                    <label>Filter by Customer:</label>
                    <select class="filter-select" id="filter-category">
                      <option value="">All Customers</option>
                    </select>
                  </div>
                  <div class="filter-group">
                    <label>Date Range:</label>
                    <input type="date" class="date-input" value="2025-04-09">
                  </div>
                  <div class="filter-buttons">
                    <button class="filter-btn">Apply Filters</button>
                  </div>
                </div>
              </div>
              <div class="card">
                <table class="table table-sm" id="customer-orders-table">
                  <h3>ORDERS</h3>
                  <thead>
                    <tr>
                      <th>Order ID</th>
                      <th>Users</th>
                      <th>Order Date</th>
                      <th>Product Name</th>
                      <th>Product Quantity</th>
                      <th>Total Amount</th>
                      <th>Payment Method</th>
                      <th>Order Status</th>
                      <th>Courier</th>
                      <th>Reference Number</th>
                      <th>Tracking Status</th>
                      <th>Created At</th>
                      <th>Updated At</th>
                    </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
              <div class="card">
                <table class="table table-sm" id="order-items-table">
                  <h3>ORDER ITEMS</h3>
                  <thead>
                    <tr>
                      <th>Item ID</th>
                      <th>Order ID</th>
                      <th>Product ID</th>
                      <th>Variant ID</th>
                      <th>Quantity</th>
                      <th>Unit Price</th>
                      <th>Discount Amount</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
              <div class="card">
                <table class="table table-sm" id="cancelled-order-items-table">
                  <h3>CANCELLED ORDERS</h3>
                  <thead>
                    <tr>
                      <th>Cancellation ID</th>
                      <th>Order ID</th>
                      <th>Cancellation Reason</th>
                      <th>Other Reason</th>
                      <th>Cancelled At</th>
                    </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
              <div class="card">
                <table class="table table-sm" id="refunded-order-items-table">
                  <h3>REFUNDED ORDERS</h3>
                  <thead>
                    <tr>
                      <th>Refund ID</th>
                      <th>Refund Reason</th>
                      <th>Refund Status</th>
                      <th>Proof of Refund</th>
                      <th>Order ID</th>
                      <th>Return ID</th>
                      <th>Created At</th>
                      <th>Updated At</th>
                    </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
              <div class="card">
                <table class="table table-sm" id="returned-order-items-table">
                  <h3>RETURNED ORDERS</h3>
                  <thead>
                    <tr>
                      <th>Return ID</th>
                      <th>Return Reason</th>
                      <th>Return Issue</th>
                      <th>Other Reason</th>
                      <th>Return Status</th>
                      <th>Refund ID</th>
                      <th>Order ID</th>
                      <th>Created At</th>
                      <th>Updated At</th>
                    </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          
          <!-- Personnel Section -->
          <div id="personnel-section" class="content-section">
            <div class="header">
              <h1>PERSONNEL MANAGEMENT</h1>
            </div>

            <div class="personnel-actions">
              <a href="#" class="personnel-add-btn">Add Personnel</a>
              <a href="#" class="personnel-edit-btn">Edit Personnel</a>
              <a href="#" class="personnel-delete-btn">Delete Personnel</a>
            </div>
            
            <div class="personnel-cards">
              <div class="card">
                <div class="filter-section">
                  <div class="filter-group">
                    <label>Role</label>
                    <select class="filter-select" id="filter-category">
                      <option>All Roles</option>
                      <option>Admin</option>
                      <option>Staff</option>
                    </select>
                  </div>
                  <div class="filter-group">
                    <label>Status</label>
                    <select class="filter-select" id="filter-category">
                      <option>All Status</option>
                      <option>Active</option>
                      <option>Inactive</option>
                    </select>
                  </div>
                  <div class="filter-buttons">
                    <button class="personnel-filter-btn">Apply Filters</button>
                    <button class="personnel-reset-btn">Reset</button>
                  </div>
                </div>
              </div>
              <div class="card">
                <table class="personnel-table">
                  <thead>
                    <tr>
                      <th>User ID</th>
                      <th>Username</th> <!-- generate username -->
                      <th>Email</th>
                      <th>Password</th>
                      <th>First Name</th>
                      <th>Middle Name</th>
                      <th>Last Name</th>
                      <th>Role</th>
                      <th>Last Login</th>
                      
                    </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

           <!-- Reports Section -->
           <div id="reports-section" class="content-section">

            <div class="header">
              <h1>REPORTS MANAGEMENT</h1>
            </div>

            <div class="reports-cards">
              <div class="reports-table">
                <h2>User Reports</h2>
                <div id="reportIcons">
            <div class="report-icon-block" data-report="stock">
                <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
                <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Customer List</div>
            </div>
            <div class="report-icon-block" data-report="activity">
                <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
                <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Activity Report</div>
            </div>
        </div>
            </div>
          </div>

          <div class="reports-cards">
            <div class="reports-table">
              <h2>Supplier Reports</h2>
              <div id="reportIcons">
          <div class="report-icon-block" data-report="stock">
              <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
              <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Supplier List</div>
          </div>
          <div class="report-icon-block" data-report="purchase">
              <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
              <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Purchase Order Report</div>
          </div>
          <div class="report-icon-block" data-report="payment">
              <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
              <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Payment Report</div>
          </div>
          <div class="report-icon-block" data-report="financial">
              <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
              <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Financial Report</div>
          </div>
      </div>
          </div>
        </div>

        <div class="reports-cards">
          <div class="reports-table">
            <h2>Inventory Reports</h2>
            <div id="reportIcons">
        <div class="report-icon-block" data-report="stock">
            <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
            <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Product List</div>
        </div>
        <div class="report-icon-block" data-report="stockin">
            <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
            <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Stock In Report</div>
        </div>
        <div class="report-icon-block" data-report="stockout">
            <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
            <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Stock Out List</div>
        </div>
        <div class="report-icon-block" data-report="financial">
            <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
            <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Over Stock List</div>
        </div>
        <div class="report-icon-block" data-report="product">
            <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
            <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Low Stock List</div>
        </div>
        <div class="report-icon-block" data-report="product">
          <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
          <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Critical Stock List</div>
      </div>
      <div class="report-icon-block" data-report="product">
        <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
        <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Damaged Stock List</div>
    </div> 
    <div class="report-icon-block" data-report="product">
      <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
      <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">For Return List</div>
  </div> 
    </div>
        </div>
      </div>

      <div class="reports-cards">
        <div class="reports-table">
          <h2>Sales Reports</h2>
          <div id="reportIcons">
      <div class="report-icon-block" data-report="stock">
          <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
          <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Sales Order Report</div>
      </div>
      <div class="report-icon-block" data-report="refunded">
          <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
          <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Refunded Items Report</div>
      </div>
  </div>
      </div>
    </div>

    <div class="reports-cards">
      <div class="reports-table">
        <h2>Customer Order Reports</h2>
        <div id="reportIcons">
    <div class="report-icon-block" data-report="stock">
        <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
        <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Customer Order Report</div>
    </div>
    <div class="report-icon-block" data-report="returned">
        <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
        <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Returned Items Report</div>
    </div>
    <div class="report-icon-block" data-report="cancelled">
        <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
        <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Feedback & Reviews Report</div>
    </div>
</div>
    </div>
  </div>

  <div class="reports-cards">
    <div class="reports-table">
      <h2>Personnel Reports</h2>
      <div id="reportIcons">
  <div class="report-icon-block" data-report="personnel">
      <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
      <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Personnel List</div>
  </div>
  <div class="report-icon-block" data-report="performance">
      <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
      <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Employee Performance</div>
  </div>
  <div class="report-icon-block" data-report="audit">
      <i class="fa fa-file-alt report-file-icon" style="font-size:64px;color:#2563eb;cursor:pointer;"></i>
      <div style="font-size:1.2rem;color:#2563eb;margin-top:8px;">Audit Log</div>
  </div>
</div>
  </div>
</div>
        </div>
 
          <!-- Settings Section -->
          <div id="setting-section" class="content-section">
            <div class="header">
              <h1>SETTINGS MANAGEMENT</h1>
              
            </div>
            <div class="setting-cards">
              <div class="card">
                <h2 class="section-title">PROFILE SETTINGS</h2>
                <div class="filter-section">
                  <div class="settings-form">
                    <div class="filter-group">
                      <label>Username</label>
                      <input type="text" id="settings-username" value="{{ current_user.username }}" class="filter-input">
                    </div>
                    <div class="filter-group">
                      <label>Email</label>
                      <input type="text" id="settings-email" value="{{ current_user.email }}" class="filter-input">
                    </div>
                    <div class="filter-group">
                      <label>First Name</label>
                      <input type="text" id="settings-first-name" value="{{ current_user.first_name }}" class="filter-input">
                    </div>
                    <div class="filter-group">
                      <label>Middle Name</label>
                      <input type="text" id="settings-middle-name" value="{{ current_user.middle_name }}" class="filter-input">
                    </div>
                    <div class="filter-group">
                      <label>Last Name</label>
                      <input type="text" id="settings-last-name" value="{{ current_user.last_name }}" class="filter-input">
                    </div>
                    <div class="filter-group">
                      <label>Role</label>
                      <input type="text" id="settings-role" value="{{ current_user.role }}" class="filter-input">
                    </div>
                    <div class="filter-buttons">
                      <button class="filter-btn save-btn" id="settings-save-btn">Save Changes</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card">
                <h2 class="section-title">SECURITY SETTINGS</h2>
                <div class="filter-section">
                  <div class="settings-form-second">
                    <div class="filter-group">
                      <label>Current Password</label>
                      <input type="password" id="security-current-password" class="filter-input">
                    </div>
                    <div class="filter-group">
                      <label>New Password</label>
                      <input type="password" id="security-new-password" class="filter-input">
                    </div>
                    <div class="filter-group">
                      <label>Confirm New Password</label>
                      <input type="password" id="security-confirm-password" class="filter-input">
                    </div>
                    <div class="filter-buttons">
                      <button class="filter-btn save-btn" id="settings-save-btn">Save Changes</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <div id="backup-section" class="content-section">
            <div class="header">
              <h1>BACKUP & RESTORE</h1>
            </div>
          
            <div class="backup-box">
              <button type="button" class="btn btn-primary btn-lg" id="backup-btn">â¬†ï¸ Backup</button>
              <button type="button" class="btn btn-primary btn-lg" id="restore-btn">â¬‡ï¸ Restore</button>
              <input type="file" id="restore-file-input" style="display:none" accept=".bak,.sql,.csv" />
              <script>
                document.getElementById('backup-btn').onclick = function() {
                  window.location.href = '/admin/backup';
                };
                document.getElementById('restore-btn').onclick = function() {
                  document.getElementById('restore-file-input').click();
                };
                document.getElementById('restore-file-input').onchange = function(e) {
                  var file = e.target.files[0];
                  if (!file) return;
                  var formData = new FormData();
                  formData.append('file', file);
                  fetch('/admin/restore', {
                    method: 'POST',
                    body: formData
                  }).then(res => res.json()).then(data => {
                    if (data.success) {
                      alert('Database restored successfully!');
                    } else {
                      alert('Restore failed: ' + (data.error || 'Unknown error'));
                    }
                  }).catch(err => alert('Restore failed: ' + err));
                };
              </script>
          
              <div class="backup-guide" style="margin-top: 18px; font-size: 1.3rem; color: #333;">
                <p>Click <b>Backup</b> to save a copy of your database data.<br>
                To <b>Restore</b>, you need to export a database file.</p>
              </div>
            </div>

            
          </div>

          
          
        <!-- Add Product Modal -->
        <div class="modal fade" id="addProductModal" tabindex="-1" role="dialog" aria-labelledby="addProductModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="addProductModalLabel">Add Product</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form id="add-product-form">
  <div class="form-group">
                    <label for="product-picture">Picture</label>
                    <input type="file" class="form-control" id="product-picture" name="picture" accept="image/*">
                  </div>
                  
                  <div class="form-group">
    <label for="product-name">Product Name</label>
    <input type="text" class="form-control" id="product-name" name="product_name" required>
  </div>
  <div class="form-group">
    <label for="model-number">Model Number</label>
    <input type="text" class="form-control" id="model-number" name="model_number" required>
  </div>
  <div class="form-group">
    <label for="product-description">Description</label>
    <textarea class="form-control" id="product-description" name="description" rows="2"></textarea>
  </div>
  <div class="form-group">
    <label for="category-id">Category ID</label>
    <input type="number" class="form-control" id="category-id" name="category_id" required>
  </div>
  <div class="form-group">
    <label for="base-price">Base Price</label>
    <input type="number" class="form-control" id="base-price" name="base_price" step="0.01" required>
  </div>
  <div class="form-group">
    <label for="created-at">Created At</label>
    <input type="datetime-local" class="form-control" id="created-at" name="created_at">
  </div>
  <div class="form-group">
    <label for="updated-at">Updated At</label>
    <input type="datetime-local" class="form-control" id="updated-at" name="updated_at">
  </div>
  <button type="submit" class="btn btn-primary">Add Product</button>
</form>
                    <input type="text" class="form-control" id="product-variation" name="variation">
                  </div>
                  <button type="submit" class="btn btn-primary">Add Product</button>
                </form>
              </div>
            </div>
          </div>

          <!-- Supplier Product Add Modal -->
<div class="modal fade" id="addSupplierProductModal" tabindex="-1" role="dialog" aria-labelledby="addSupplierProductModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="add-supplier-product-form">
        <div class="modal-header">
          <h5 class="modal-title" id="addSupplierProductModalLabel">Add Supplier Product</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="modal-product-id">Product ID</label>
            <input type="text" class="form-control" id="modal-product-id" name="product_id" required>
          </div>
          <div class="form-group">
            <label for="modal-product-name">Product Name</label>
            <input type="text" class="form-control" id="modal-product-name" name="product_name" required>
          </div>
          <div class="form-group">
            <label for="modal-supplier-id">Supplier ID</label>
            <input type="text" class="form-control" id="modal-supplier-id" name="supplier_id" required>
          </div>
          <div class="form-group">
            <label for="modal-supplier-price">Supplier Price</label>
            <input type="number" class="form-control" id="modal-supplier-price" name="supplier_price" required>
          </div>
          <div class="form-group">
            <label for="modal-is-primary">Is Primary</label>
            <select class="form-control" id="modal-is-primary" name="is_primary">
              <option value="1">Yes</option>
              <option value="0">No</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

        </div>

        </div> <!-- end of main-content -->
    </div> <!-- end of row/dashboard -->
</div> <!-- end of container-fluid -->

<div id="chatModal" class="chat-modal">
  <div class="chat-modal-content">
      <div class="chat-modal-header" id="chatHeaderBar">
          <span class="chat-modal-title">Recent Chats</span>
          <button class="chat-modal-close" id="closeChatModal" aria-label="Close">&times;</button>
      </div>
      <div class="chat-modal-list" id="chatList" style="display: block;">
          <div class="chat-modal-item" id="openConversation">
              <img src="{{ url_for('static', filename='pictures/JBR LOGO.png') }}" alt="JBR" class="chat-modal-avatar">
              <div class="chat-modal-details">
                  <div class="chat-modal-name">JBR Tanching C.O</div>
                  <div class="chat-modal-message">We do not have enough stock avai ...</div>
              </div>
          </div>
      </div>
      <div class="chat-modal-conversation" id="chatConversation" style="display: none;">
          <button class="chat-conv-back" id="backToList">&#8592; Back</button>
          <div class="chat-conv-company-row">
              <img src="{{ url_for('static', filename='pictures/JBR LOGO.png') }}" alt="JBR" class="chat-modal-avatar">
              <div class="chat-conv-company-info">
                  <div class="chat-modal-name">JBR Tanching C.O</div>
                  <div class="chat-modal-role">Company</div>
              </div>
          </div>
          <div class="chat-conv-divider">Yesterday</div>
          <div class="chat-conv-messages">
              <div class="chat-message chat-message-them">
                  <span>When blue color will be available?</span>
              </div>
              <div class="chat-message chat-message-you">
                  <span>We don't have enough stock for Lacoster Fabrics</span>
              </div>
          </div>
          <div class="chat-conv-input">
              <input type="text" id="chatInput" placeholder="Type here...." />
              <input type="file" id="chatFileInput" style="display:none;" />
              <div class="chat-conv-icons">
                  <button class="chat-attach-btn" id="chatAttachBtn" type="button">
                      <img src="{{ url_for('static', filename='pictures/attach.png') }}" alt="Attach" style="width:28px;height:28px;">
                  </button>
                  <button class="chat-send-btn" id="chatSendBtn" type="button">
                      <img src="{{ url_for('static', filename='pictures/arrow.png') }}" alt="Send" style="width:28px;height:28px;">
                  </button>
              </div>
          </div>
      </div>
  </div>
</div>

<script>
  // Sidebar navigation: show only the selected section
  function showSection(sectionName) {
    // Remove active class from all nav items and content sections
    const navItems = document.querySelectorAll('.nav-item');
    const contentSections = document.querySelectorAll('.content-section');
    navItems.forEach(nav => nav.classList.remove('active'));
    contentSections.forEach(section => section.classList.remove('active'));

    // Add active class to clicked nav item by ID
    const clickedNav = document.getElementById(`${sectionName}-tab-btn`);
    if (clickedNav) clickedNav.classList.add('active');

    // Show the target section
    const targetSection = document.getElementById(`${sectionName}-section`);
    if (targetSection) targetSection.classList.add('active');
    console.log('Activating section:', sectionName);
    console.log('Activating section:', sectionName);
}

// Attach click listeners using the tab's ID, not text
// This ensures correct mapping even for multi-word tabs

document.addEventListener('DOMContentLoaded', function() {
  // Attach click handlers to nav items (only once)
  document.querySelectorAll('.nav-item:not([onclick])').forEach(item => {
    item.addEventListener('click', function(e) {
      e.preventDefault();
      // Extract sectionName from ID: "inventory-tab-btn" -> "inventory"
      const id = item.id;
      const sectionName = id.replace('-tab-btn', '');
      showSection(sectionName);
    });
  });
  // Show dashboard section by default on load
  showSection('dashboard');
});
// --- END OF NAVIGATION BLOCK ---

  // Add contains polyfill for older browsers
  if (!Element.prototype.matches) {
    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
  }
  if (!Element.prototype.closest) {
    Element.prototype.closest = function(s) {
      var el = this;
      do {
        if (el.matches(s)) return el;
        el = el.parentElement || el.parentNode;
      } while (el !== null && el.nodeType === 1);
      return null;
    };
  }

</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/chat_modal.js') }}"></script>
<script src="{{ url_for('static', filename='js/product_modal.js') }}"></script>
<script src="{{ url_for('static', filename='js/admin_profile_dropdown.js') }}"></script>
<script src="{{ url_for('static', filename='js/admin_reports.js') }}"></script>
<script src="{{ url_for('static', filename='js/admin.js') }}"></script>
