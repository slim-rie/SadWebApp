{% extends "auth_base.html" %}
{% block title %}Contact Seller{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='contact_seller.css') }}" />

<div class="contact-form-container">
    <h2>Contact Seller</h2>
    <div class="product-info">
        <img src="{{ product.image_url }}" alt="{{ product.name }}" class="product-image">
        <div class="product-details">
            <h3>{{ product.name }}</h3>
            <p class="price">â‚±{{ "%.2f"|format(product.price) }}</p>
        </div>
    </div>

    <form method="POST">
        <div class="form-group">
            <label for="issue">Select Issue</label>
            {% if product.category == 'Sewing Machines' %}
            <select id="issue" name="issue" class="issue-select" required>
                <option value="">-- Select an Issue --</option>
                <option value="machine-jamming">Machine Jamming</option>
                <option value="noise-issues">Unusual Noise</option>
                <option value="tension-problems">Thread Tension Problems</option>
                <option value="speed-control">Speed Control Issues</option>
                <option value="needle-breaking">Needle Breaking</option>
                <option value="other">Other (Specify)</option>
            </select>
            {% elif product.category == 'Sewing Parts' %}
            <select id="issue" name="issue" class="issue-select" required>
                <option value="">-- Select an Issue --</option>
                <option value="compatibility">Part Compatibility</option>
                <option value="installation">Installation Help</option>
                <option value="defective">Defective Part</option>
                <option value="specifications">Part Specifications</option>
                <option value="replacement">Replacement Query</option>
                <option value="other">Other (Specify)</option>
            </select>
            {% elif product.category == 'Fabric' %}
            <select id="issue" name="issue" class="issue-select" required>
                <option value="">-- Select an Issue --</option>
                <option value="quality">Quality Concerns</option>
                <option value="color-pattern">Color/Pattern Questions</option>
                <option value="measurements">Fabric Measurements</option>
                <option value="care-instructions">Care Instructions</option>
                <option value="availability">Availability/Stock</option>
                <option value="other">Other (Specify)</option>
            </select>
            {% endif %}
        </div>

        <div class="form-group" id="other-issue-group" style="display: none;">
            <label for="other-issue">Specify Issue</label>
            <input type="text" id="other-issue" name="other_issue" 
                   placeholder="Please describe your issue">
        </div>

        <div class="form-group">
            <label for="message">Message</label>
            <textarea id="message" name="message" required 
                      placeholder="Type your message here..."></textarea>
        </div>

        <div class="form-actions">
            <a href="{{ url_for('views.home') }}" class="btn btn-cancel">Cancel</a>
            <button type="submit" class="btn btn-send">Send Message</button>
        </div>

        <div class="note">
            <p>Note: This message will be sent to the staff for processing.</p>
        </div>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const issueSelect = document.getElementById('issue');
    const otherIssueGroup = document.getElementById('other-issue-group');
    const otherIssueInput = document.getElementById('other-issue');

    issueSelect.addEventListener('change', function() {
        if (this.value === 'other') {
            otherIssueGroup.style.display = 'block';
            otherIssueInput.required = true;
        } else {
            otherIssueGroup.style.display = 'none';
            otherIssueInput.required = false;
        }
    });
});
</script>
{% endblock %}
